<!DOCTYPE HTML>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Riemann Rectangles between Two Curves</title>
    <script src="https://sagecell.sagemath.org/static/jquery.min.js"></script>
    <script src="https://sagecell.sagemath.org/embedded_sagecell.js"></script>
    <script>
$(function () {
    // Make *any* div with class 'compute' a Sage cell
    sagecell.makeSagecell({inputLocation: 'div.compute',
    						template:       sagecell.templates.minimal,
                           evalButtonText: 'Launch the Interactive Applet Now'});
});
    </script>
  </head>
  <body style="width: 1000px;">

  <h1>Riemann Rectangles between Two Curves</h1>

<p>An Interactive Applet powered by Sage and MathJax.</p>
<p>(By Kelsey Norman with HTML code from Prof. Gregory V. Bard)</p>

<hr>

<div class="compute">
<script type="text/x-sage">

@interact( layout = [ ['func', 'gunc', 'sum_type'], ['lower', 'upper', 'n'], ['x_min', 'x_max'] ])
def riemann2( func = input_box( default = x, label = "lower function", width = 20), 
        gunc = input_box( default = x^2, label = "upper function", width = 20), 
        lower = input_box( default = 1, label = "lower bound", width = 5), 
        upper = input_box( default = 4, label = "upper bound", width = 5), 
        n = input_box( default = 6, label = "# of intervals", width = 5), 
        x_min = input_box( default = 0, label = "x min", width = 5), 
        x_max = input_box( default = 5, label = "x max", width = 5),
        sum_type = selector(['left', 'right', 'midpoint', 'minimum', 'maximum'], label = "type of sum") ):
    
    # Avoid the deprecation warning
    f = func.function(x)
    g = gunc.function(x)
    
    # Initial graphs and filled area
    graph_f = plot( f, x_min, x_max )
    graph_g = plot( g, x_min, x_max, color = "#2eb82e" )
    graph_filled = plot( [f,g], (x,lower,upper), fill={0:[1]}, fillcolor = "#ffff99" )
    
     # set up for Riemann rectangles
    width = (upper - lower) / n
    half = width / 2
    sum_area = 0
 
    # Check if f is a function of x, then add the rectangles
    if f.has(x):
        rectangles = polygon([ (lower, f(lower)), (lower, f(lower)+10^-12), (lower, f(lower)-10^-12) ], aspect_ratio = "automatic")
    else:
        rectangles = polygon([ (lower, f), (lower, f+10^-12), (lower, f-10^-12) ], aspect_ratio = "automatic")
    
    # Left sum
    if sum_type == "left" :    
        for j in range(n) :
            min = lower + j * width
            max = lower + (j+1) * width
            if f(min) != g(min) :
                rectangles += polygon([ (min, f(min)), (min, g(min)), (max, g(min)), (max, f(min)) ], color = '#ff4d4d', edgecolor = '#ff3300', thickness = 2, aspect_ratio = 'automatic')
                sum_area += N(width * (g(min) - f(min)))
    
    # Right sum
    elif sum_type == "right" :    
        for j in range(n) :
            min = lower + j * width
            max = lower + (j+1) * width
            if f(max) != g(max) :
                rectangles += polygon([ (min, f(max)), (min, g(max)), (max, g(max)), (max, f(max)) ], color = '#ff4d4d', edgecolor = '#ff3300', thickness = 2, aspect_ratio = 'automatic')
                sum_area += N(width * (g(max) - f(max)))
    
    # Midpoint sum            
    elif sum_type == "midpoint" :    
        for j in range(n) :
            min = lower + j * width
            mid = lower + half + j * width
            max = lower + (j+1) * width
            if f(mid) != g(mid) :
                rectangles += polygon([ (min, f(mid)), (min, g(mid)), (max, g(mid)), (max, f(mid)) ], color = '#ff4d4d', edgecolor = '#ff3300', thickness = 2, aspect_ratio = 'automatic')
                sum_area += N(width * (g(mid) - f(mid)))
    
    # Minimum sum            
    elif sum_type == "minimum" :    
        for j in range(n) :
            min = lower + j * width
            max = lower + (j+1) * width
            f_min = f.find_local_minimum(min, max)
            g_min = g.find_local_minimum(min, max)
            height_f = f_min[0]
            height_g = g_min[0]
            if f(height_f) != g(height_g) :
                rectangles += polygon([ (min, height_f), (min, height_g), (max, height_g), (max, height_f) ], color = '#ff4d4d', edgecolor = '#ff3300', thickness = 2, aspect_ratio = 'automatic') 
                sum_area += N(width * (height_g - height_f))
    
    # Maximum sum            
    elif sum_type == "maximum" :    
        for j in range(n) :
            min = lower + j * width
            max = lower + (j+1) * width
            f_max = f.find_local_maximum(min, max)
            g_max = g.find_local_maximum(min, max)
            height_f = f_max[0]
            height_g = g_max[0]
            if f(height_f) != g(height_g) :
                rectangles += polygon([ (min, height_f), (min, height_g), (max, height_g), (max, height_f) ], color = '#ff4d4d', edgecolor = '#ff3300', thickness = 2, aspect_ratio = 'automatic')
                sum_area += N(width * (height_g - height_f))               
    
    # Print the approximated area
    print "The approximated area between the curves is " + str(sum_area) + "."
    
    # Calculate the actual area and the precision
    (area, precision) = numerical_integral( g-f, lower, upper )
    l=0
    while precision <= 10^-l:
        l += 1
    print "The actual area between the curves is " + str(area) + ", accurate to 10^-" + str(l)
    
    # Combine the plots and show the graph
    graph = graph_g + graph_filled + graph_f + rectangles
    graph.show()

</script>
</div>

<hr>
Last modified on June 15th, 2017.
</body>
</html>
